---
phase: 07-deployment-architecture
plan: 02
type: execute
wave: 1
depends_on: [07-01]
files_modified:
  - docs/MODE_PARITY_AND_OFFLINE_UPDATE.md
autonomous: true

must_haves:
  truths:
    - "The mode parity matrix explicitly documents every feature with its online/offline status, and every divergence has a documented reason and workaround"
    - "The offline update cycle specifies the signing mechanism, verification procedure, migration steps, and zero-downtime cutover sequence"
  artifacts:
    - path: "docs/MODE_PARITY_AND_OFFLINE_UPDATE.md"
      provides: "Mode parity matrix and offline update cycle"
      min_lines: 350
---

<objective>
Create mode parity matrix and offline update cycle document: (1) Feature-by-feature online/offline status; (2) Every divergence with reason and workaround; (3) Signing (SOPS+age or GPG), verification, migration steps, zero-downtime cutover.

Output: `docs/MODE_PARITY_AND_OFFLINE_UPDATE.md`
</objective>

<context>
@docs/TECH_DECISIONS.md (Section 4 cross-mode compatibility)
@docs/DEPLOYMENT_ARCHITECTURE.md (offline bundle structure)
@docs/PRD.md (pipeline phases, features)
</context>

<tasks>
<task type="auto">
  <name>Write mode parity and offline update</name>
  <files>docs/MODE_PARITY_AND_OFFLINE_UPDATE.md</files>
  <action>
Create docs/MODE_PARITY_AND_OFFLINE_UPDATE.md with: (1) Section 1 Mode Parity Matrix — every feature (intake, parsing, policy, embedding, serving, tenant provisioning, audit, monitoring, secrets) with online/offline status; (2) Section 2 Divergences — each with reason and workaround (embedding model, ClamAV signatures, log aggregation, audit aggregation, etc.); (3) Section 3 Offline Update Cycle — signing (age + tarball checksum), verification (sops verify, sha256), migration steps (Alembic upgrade, data migrations), zero-downtime cutover (rolling restart or blue-green)
  </action>
</task>
</tasks>

<output>
Create 07-02-SUMMARY.md
</output>
